From b9448624f3c7b913671d89c4a12be385f976ebad Mon Sep 17 00:00:00 2001
From: Ludwig Pusl <ludwig.pusl@tum.de>
Date: Thu, 30 Mar 2023 09:46:24 +0200
Subject: [PATCH] manual fix for correct QuizQuestions until the generator
 works

---
 .../ase/artemis/sdk/model/DragAndDropQuestion.java   | 12 +-----------
 .../artemis/sdk/model/MultipleChoiceQuestion.java    | 12 +-----------
 .../tum/cit/ase/artemis/sdk/model/QuizQuestion.java  |  9 +++------
 .../ase/artemis/sdk/model/ShortAnswerQuestion.java   | 11 +----------
 4 files changed, 6 insertions(+), 38 deletions(-)

diff --git a/artemis-sdk/src/main/java/de/tum/cit/ase/artemis/sdk/model/DragAndDropQuestion.java b/artemis-sdk/src/main/java/de/tum/cit/ase/artemis/sdk/model/DragAndDropQuestion.java
index e72c6f2..68979fa 100644
--- a/artemis-sdk/src/main/java/de/tum/cit/ase/artemis/sdk/model/DragAndDropQuestion.java
+++ b/artemis-sdk/src/main/java/de/tum/cit/ase/artemis/sdk/model/DragAndDropQuestion.java
@@ -49,17 +49,7 @@ import de.tum.cit.ase.artemis.sdk.JSON;
   DragAndDropQuestion.JSON_PROPERTY_CORRECT_MAPPINGS
 })
 @jakarta.annotation.Generated(value = "org.openapitools.codegen.languages.JavaClientCodegen", date = "2023-03-27T15:31:11.360443Z[Etc/UTC]")
-@JsonIgnoreProperties(
-  value = "type", // ignore manually set type, it will be automatically generated by Jackson during serialization
-  allowSetters = true // allows the type to be set during deserialization
-)
-@JsonTypeInfo(use = JsonTypeInfo.Id.NAME, include = JsonTypeInfo.As.PROPERTY, property = "type", visible = true)
-@JsonSubTypes({
-  @JsonSubTypes.Type(value = DragAndDropQuestion.class, name = "drag-and-drop"),
-  @JsonSubTypes.Type(value = MultipleChoiceQuestion.class, name = "multiple-choice"),
-  @JsonSubTypes.Type(value = ShortAnswerQuestion.class, name = "short-answer"),
-})
-
+@JsonTypeName("drag-and-drop")
 public class DragAndDropQuestion extends QuizQuestion {
   public static final String JSON_PROPERTY_BACKGROUND_FILE_PATH = "backgroundFilePath";
   private String backgroundFilePath;
diff --git a/artemis-sdk/src/main/java/de/tum/cit/ase/artemis/sdk/model/MultipleChoiceQuestion.java b/artemis-sdk/src/main/java/de/tum/cit/ase/artemis/sdk/model/MultipleChoiceQuestion.java
index 5f99a5d..0b796cf 100644
--- a/artemis-sdk/src/main/java/de/tum/cit/ase/artemis/sdk/model/MultipleChoiceQuestion.java
+++ b/artemis-sdk/src/main/java/de/tum/cit/ase/artemis/sdk/model/MultipleChoiceQuestion.java
@@ -45,17 +45,7 @@ import de.tum.cit.ase.artemis.sdk.JSON;
   MultipleChoiceQuestion.JSON_PROPERTY_SINGLE_CHOICE
 })
 @jakarta.annotation.Generated(value = "org.openapitools.codegen.languages.JavaClientCodegen", date = "2023-03-27T15:31:11.360443Z[Etc/UTC]")
-@JsonIgnoreProperties(
-  value = "type", // ignore manually set type, it will be automatically generated by Jackson during serialization
-  allowSetters = true // allows the type to be set during deserialization
-)
-@JsonTypeInfo(use = JsonTypeInfo.Id.NAME, include = JsonTypeInfo.As.PROPERTY, property = "type", visible = true)
-@JsonSubTypes({
-  @JsonSubTypes.Type(value = DragAndDropQuestion.class, name = "drag-and-drop"),
-  @JsonSubTypes.Type(value = MultipleChoiceQuestion.class, name = "multiple-choice"),
-  @JsonSubTypes.Type(value = ShortAnswerQuestion.class, name = "short-answer"),
-})
-
+@JsonTypeName("multiple-choice")
 public class MultipleChoiceQuestion extends QuizQuestion {
   public static final String JSON_PROPERTY_ANSWER_OPTIONS = "answerOptions";
   private List<AnswerOption> answerOptions = new ArrayList<>();
diff --git a/artemis-sdk/src/main/java/de/tum/cit/ase/artemis/sdk/model/QuizQuestion.java b/artemis-sdk/src/main/java/de/tum/cit/ase/artemis/sdk/model/QuizQuestion.java
index d302d16..6a4c0c7 100644
--- a/artemis-sdk/src/main/java/de/tum/cit/ase/artemis/sdk/model/QuizQuestion.java
+++ b/artemis-sdk/src/main/java/de/tum/cit/ase/artemis/sdk/model/QuizQuestion.java
@@ -56,12 +56,9 @@ import de.tum.cit.ase.artemis.sdk.JSON;
 )
 @JsonTypeInfo(use = JsonTypeInfo.Id.NAME, include = JsonTypeInfo.As.PROPERTY, property = "type", visible = true)
 @JsonSubTypes({
-  @JsonSubTypes.Type(value = DragAndDropQuestion.class, name = "DragAndDropQuestion"),
-  @JsonSubTypes.Type(value = MultipleChoiceQuestion.class, name = "MultipleChoiceQuestion"),
-  @JsonSubTypes.Type(value = ShortAnswerQuestion.class, name = "ShortAnswerQuestion"),
-  @JsonSubTypes.Type(value = DragAndDropQuestion.class, name = "drag-and-drop"),
-  @JsonSubTypes.Type(value = MultipleChoiceQuestion.class, name = "multiple-choice"),
-  @JsonSubTypes.Type(value = ShortAnswerQuestion.class, name = "short-answer"),
+        @JsonSubTypes.Type(value = DragAndDropQuestion.class, name = "drag-and-drop"),
+        @JsonSubTypes.Type(value = MultipleChoiceQuestion.class, name = "multiple-choice"),
+        @JsonSubTypes.Type(value = ShortAnswerQuestion.class, name = "short-answer"),
 })
 
 public class QuizQuestion {
diff --git a/artemis-sdk/src/main/java/de/tum/cit/ase/artemis/sdk/model/ShortAnswerQuestion.java b/artemis-sdk/src/main/java/de/tum/cit/ase/artemis/sdk/model/ShortAnswerQuestion.java
index 3abcc0c..3459a95 100644
--- a/artemis-sdk/src/main/java/de/tum/cit/ase/artemis/sdk/model/ShortAnswerQuestion.java
+++ b/artemis-sdk/src/main/java/de/tum/cit/ase/artemis/sdk/model/ShortAnswerQuestion.java
@@ -50,16 +50,7 @@ import de.tum.cit.ase.artemis.sdk.JSON;
   ShortAnswerQuestion.JSON_PROPERTY_MATCH_LETTER_CASE
 })
 @jakarta.annotation.Generated(value = "org.openapitools.codegen.languages.JavaClientCodegen", date = "2023-03-27T15:31:11.360443Z[Etc/UTC]")
-@JsonIgnoreProperties(
-  value = "type", // ignore manually set type, it will be automatically generated by Jackson during serialization
-  allowSetters = true // allows the type to be set during deserialization
-)
-@JsonTypeInfo(use = JsonTypeInfo.Id.NAME, include = JsonTypeInfo.As.PROPERTY, property = "type", visible = true)
-@JsonSubTypes({
-  @JsonSubTypes.Type(value = DragAndDropQuestion.class, name = "drag-and-drop"),
-  @JsonSubTypes.Type(value = MultipleChoiceQuestion.class, name = "multiple-choice"),
-  @JsonSubTypes.Type(value = ShortAnswerQuestion.class, name = "short-answer"),
-})
+@JsonTypeName("short-answer")
 
 public class ShortAnswerQuestion extends QuizQuestion {
   public static final String JSON_PROPERTY_SPOTS = "spots";
-- 
2.34.1

